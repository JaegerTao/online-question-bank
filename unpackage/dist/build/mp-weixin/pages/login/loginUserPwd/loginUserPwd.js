(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/loginUserPwd/loginUserPwd"],{"00c2":function(e,n,t){"use strict";t.r(n);var o=t("689a"),a=t("6f5b");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("81d3");var c,u=t("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);n["default"]=r.exports},"49bc":function(e,n,t){},"689a":function(e,n,t){"use strict";var o;t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var a=function(){var e=this,n=e.$createElement;e._self._c},i=[]},"6f5b":function(e,n,t){"use strict";t.r(n);var o=t("73da"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"73da":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("b41e"));function a(e){return e&&e.__esModule?e:{default:e}}var i=t("24cb"),c=i.RSA.generateKeys(1024,"pkcs8"),u=(c.publicKey,c.privateKey,new i.RSA),r={data:function(){return{public_key:"",loginForm:{user:"",pwd:""},loading:!1,hideEyes:!1}},onLoad:function(){},methods:{handleLogin:function(){return this.loading=!0,this.checkMobile(this.loginForm.user)?""===this.loginForm.pwd?(e.showToast({title:"请填写密码",duration:1e3,icon:"none"}),void(this.loading=!1)):void this.doLogin():(e.showToast({title:"请输入正确的手机号码",duration:1e3,icon:"none"}),void(this.loading=!1))},doLogin:function(){var n=this;e.request({url:o.default.DomainName+"/loginVerify/public_key",method:"POST",success:function(t){n.public_key="-----BEGIN PUBLIC KEY-----\n"+t.data.PublicKey+"\n-----END PUBLIC KEY-----",u.setPublicKey(n.public_key);var a=t.data.TimeStamp,i=n.loginForm.user,c=u.encrypt(n.loginForm.pwd,"base64");e.request({url:o.default.DomainName+"/login/pLogin",method:"POST",data:{user:i,pwd:c,TimeStamp:a},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(1==t.data.errcode){var o=t.header["Set-Cookie"].substr(0,44);e.setStorageSync("sessionid",o),n.loading=!1,e.setStorageSync("LoginId",t.data.data.LoginId),e.setStorageSync("Pname",t.data.data.Pname),e.setStorageSync("RoleFlag",t.data.data.RoleFlag),n.afterlogin(0,t.data.data.LoginId),e.showToast({title:"登录成功",duration:2e3}),e.reLaunch({url:"../../index/index"})}else 100==t.data.errcode?e.showModal({title:"登录失败",content:"当前账号已在其他端登录，不能重复登录",showCancel:!1,success:function(n){n.confirm&&e.navigateBack({delta:2})}}):105==t.data.errcode&&e.showModal({title:"登录失败",content:"用户名密码错误或用户不存在或已注销",showCancel:!1,success:function(n){n.confirm&&e.navigateBack({delta:1})}})},fail:function(){n.loading=!1,e.showToast({title:"请检查网络",icon:"none"})}})},fail:function(){n.loading=!1,e.showToast({title:"请检查网络",icon:"none"})}})},bindInput:function(e){var n=e.currentTarget.dataset.val;this.loginForm[n]=e.detail.value},passwordF_B:function(){this.hideEyes=!this.hideEyes},formSubmit:function(e){console.log(e.detail.value)},checkMobile:function(e){return RegExp(/^\s{0}$|^1\d{10}$/).test(e)},afterlogin:function(n,t){e.login({provider:"weixin",success:function(a){var i=a.code;e.request({url:o.default.DomainName+"/funcQuestion/WeChatLogIn/AfterLoginAndOut",method:"GET",data:{code:i,type:n,loginId:t},success:function(e){console.log(e)},fail:function(e){console.log(e)}})}})}}};n.default=r}).call(this,t("543d")["default"])},"81d3":function(e,n,t){"use strict";var o=t("49bc"),a=t.n(o);a.a},cb72:function(e,n,t){"use strict";(function(e){t("e5f5");o(t("66fd"));var n=o(t("00c2"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])}},[["cb72","common/runtime","common/vendor"]]]);