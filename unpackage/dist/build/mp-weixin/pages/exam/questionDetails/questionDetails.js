(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exam/questionDetails/questionDetails"],{"454b":function(e,t,n){"use strict";(function(e){n("e5f5");o(n("66fd"));var t=o(n("be25"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"4f49":function(e,t,n){},6943:function(e,t,n){"use strict";n.r(t);var o=n("e5cf"),r=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},"7c21":function(e,t,n){"use strict";var o=n("4f49"),r=n.n(o);r.a},be25:function(e,t,n){"use strict";n.r(t);var o=n("d34a"),r=n("6943");for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("7c21");var i,a=n("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=u.exports},d34a:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement;e._self._c},s=[]},e5cf:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("b41e"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function i(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var u=function(){n.e("components/circle-percent/circle-percent").then(function(){return resolve(n("2e46"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{accuracy:"0",score:0,count:0,paperDetails:{TestID:"",TestName:"",Duration:"",QCount:0,QSumScore:0,Q_Types:"",Q_TypeCounts:[]},scrollHeight:"400rpx",spendTime:{hour:0,minute:0,second:0},allQuestions:[],quesListSum:[{type:"D",sum:0},{type:"F",sum:0},{type:"J",sum:0},{type:"P",sum:0},{type:"Z",sum:0}]}},components:{circlePercent:u},onLoad:function(t){var n=JSON.parse(t.time);this.score=t.score,this.paperDetails.TestID=t.TestID;var o=JSON.parse(decodeURIComponent(t.allQuestions));this.allQuestions=o,this.setSpendTime(n),this.getQuesListFromServer(),this.getAccuracy();try{var r=e.getSystemInfoSync();console.log(r.pixelRatio),console.log(r.screenHeight),r.screenHeight>800?this.scrollHeight="690rpx":r.screenHeight>500&&(this.scrollHeight="400rpx")}catch(s){}},onReady:function(){var t=300,n=this;e.getSystemInfo({success:function(o){t=o.windowHeight,e.createSelectorQuery().select("#head").fields({size:!0,scrollOffset:!0},(function(o){t-=o.height,e.createSelectorQuery().select("#foot").fields({size:!0,scrollOffset:!0},(function(e){t-=e.height,n.swiperHeight=t+"px"})).exec()})).exec()},fail:function(){}})},onShow:function(){wx.hideHomeButton&&wx.hideHomeButton()},methods:{getQuesListFromServer:function(){var t=this;console.log("getqueslistfromserver"),e.request({url:o.default.DomainName+"/funcQuestion/Test/getTestInfo",method:"POST",data:{TestID:this.paperDetails.TestID,type:1,TestModel:"L"},header:{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("sessionid")},success:function(e){if("失败"==e.data.msg);else{t.paperDetails.TestName=e.data[0].TestName,t.paperDetails.Duration=e.data[0].Duration;var n,o="",r=s(e.data);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.paperDetails.QCount+=Number(i.QCount),t.paperDetails.QSumScore+=Number(i.QSumScore),o=o+i.QTypeID+"_";var a={QTypeOrder:"",QCount:"",QTypeID:""};a.QTypeOrder=i.QTypeOrder,a.QCount=i.QCount,a.QTypeID=i.QTypeID,t.paperDetails.Q_TypeCounts.push(a)}}catch(c){r.e(c)}finally{r.f()}var u=o.length;t.paperDetails.Q_Types=o.substr(0,u-1);o.substr(0,1);console.log(t.paperDetails)}}})},setSpendTime:function(e){this.spendTime.hour=0,this.spendTime.minute=0,this.spendTime.second=0,this.spendTime.hour=e.hour,this.spendTime.minute=e.minute,this.spendTime.second=e.second},getAccuracy:function(){for(var e=0,t=0;t<this.allQuestions.length;t++){"1"===this.allQuestions[t].uIsTrue&&e++;for(var n=0;n<this.quesListSum.length;n++)if(this.allQuestions[t].QTypeID===this.quesListSum[n].type){this.quesListSum[n].sum++;break}}this.accuracy=0===e?"0.00":(e/this.allQuestions.length*100).toFixed(2).toString(),this.count=e},AppointedSubject:function(t,n){console.log(t+" "+n),e.navigateTo({url:"../exam?TestModel=L&paperDetails="+encodeURIComponent(JSON.stringify(this.paperDetails))+"&showAllAnswer="+!0+"&type="+n+"&index="+t})},returnIndexPage:function(){e.switchTab({url:"../../index/index"})},toExam:function(){var t=this;e.showModal({title:"提醒",content:"重新测试将会消耗一次练习机会，是否继续？",success:function(n){n.confirm?e.request({url:o.default.DomainName+"/funcQuestion/Test/start",method:"POST",data:{TestID:t.paperDetails.TestID,TestModel:"L"},header:{"content-type":"application/x-www-form-urlencoded",cookie:e.getStorageSync("sessionid")},success:function(n){if("失败"==n.data.msg)e.showModal({title:"提示",content:"您的该套试卷练习次数已用完，请联系班主任通过续费购买在线练题次数",showCancel:!1,success:function(e){e.confirm&&console.log("不进入exam")}});else{t.paperDetails.TestName=n.data[0].TestName,t.paperDetails.Duration=n.data[0].Duration;var o,r="",i=s(n.data);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.paperDetails.QCount+=Number(a.QCount),t.paperDetails.QSumScore+=Number(a.QSumScore),r=r+a.QTypeID+"_"}}catch(c){i.e(c)}finally{i.f()}var u=r.length;t.paperDetails.Q_Types=r.substr(0,u-1),console.log(t.paperDetails),e.redirectTo({url:"../exam?TestModel=L&paperDetails="+encodeURIComponent(JSON.stringify(t.paperDetails))})}}}):n.cancel&&console.log("取消重新测试")}})}}};t.default=c}).call(this,n("543d")["default"])}},[["454b","common/runtime","common/vendor"]]]);