(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"1c58":function(e,o,n){},"235d":function(e,o,n){"use strict";(function(e,t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=c(n("b41e"));function c(e){return e&&e.__esModule?e:{default:e}}t.isLogin=function(){try{e.getStorageSync("LoginId"),e.getStorageSync("Pname")}catch(o){}return""!==LoginId&&""!==Pname&&{LoginId:LoginId,Pname:Pname}};var a={globalData:{token:""},data:{hidelogout:null},onLaunch:function(){console.log("1.1.4");var o=e.getStorageSync("TOKEN");o&&0!==o.length?this.checkToken(o):this.login(),this.getSession(),this.refreshSession()},onShow:function(){console.log("App Show"),this.hidelogout&&clearInterval(this.hidelogout)},onHide:function(){console.log("App Hide");var o=this,n=e.getStorageSync("sessionid");""!=n&&null!=n&&(this.hidelogout=setTimeout(o.logout,3e5))},methods:{checkToken:function(o){var n=this;console.log("执行验证token操作"),wx.request({url:i.default.DomainName+"/funcQuestion/WeChatLogIn/VerifyToken",method:"get",header:{token:o},success:function(t){if(0==t.data.tokenCheck)n.login();else{if(1==t.data.isOnLine){console.log("checklogin用户在线");t.data.loginId}else{try{e.clearStorageSync()}catch(i){}console.log("checklogin用户不在线")}console.log("得到token并储存到全局变量"),n.globalData.token=o}}})},login:function(){var o=this;console.log("执行登入操作"),wx.login({success:function(n){var t=n.code;wx.request({url:i.default.DomainName+"/funcQuestion/WeChatLogIn/WCLogIn",method:"get",data:{code:t},success:function(n){var t=n.data.token;if(o.globalData.token=t,e.setStorageSync("TOKEN",t),1==n.data.isOnLine){console.log("login用户在线");n.data.loginId}else console.log("login用户不在线")},fail:function(e){console.log(e)}})}})},logout:function(){var o=this,n=e.getStorageSync("sessionid");e.request({url:i.default.DomainName+"/loginVerify/exit",dataType:"json",header:{cookie:n},success:function(n){console.log(n),1==n.data.errcode&&(o.afterlogin(1,e.getStorageSync("LoginId")),e.clearStorage(),e.switchTab({url:"../index/index"}))}})},afterlogin:function(o,n){e.login({provider:"weixin",success:function(t){var c=t.code;e.request({url:i.default.DomainName+"/funcQuestion/WeChatLogIn/AfterLoginAndOut",method:"GET",data:{code:c,type:o,loginId:n},success:function(e){console.log(e)},fail:function(e){console.log(e)}})}})},getSession:function(){var o=e.getStorageSync("sessionid");""!=o&&null!=o&&e.request({url:i.default.DomainName+"/funcQuestion/WeChatLogIn/getSession",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",cookie:o},success:function(o){if(console.log(o),1!=o.data){var n=o.header["Set-Cookie"].substr(0,44);e.setStorageSync("sessionid",n),console.log("更新session")}},fail:function(o){e.clearStorage()}})},refreshSession:function(){var e=this;setInterval(e.getSession,12e5)}}};o.default=a}).call(this,n("543d")["default"],n("c8ba"))},2872:function(e,o,n){"use strict";var t=n("1c58"),i=n.n(t);i.a},6178:function(e,o,n){"use strict";n.r(o);var t=n("235d"),i=n.n(t);for(var c in t)"default"!==c&&function(e){n.d(o,e,(function(){return t[e]}))}(c);o["default"]=i.a},"962a":function(e,o,n){"use strict";(function(e){n("e5f5");var o=i(n("66fd")),t=i(n("e9be"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?c(Object(n),!0).forEach((function(o){r(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}function r(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}wx.__webpack_require_UNI_MP_PLUGIN__=n,o.default.config.productionTip=!1,t.default.mpType="app";var l=new o.default(a({},t.default));e(l).$mount()}).call(this,n("543d")["createApp"])},e9be:function(e,o,n){"use strict";n.r(o);var t=n("6178");for(var i in t)"default"!==i&&function(e){n.d(o,e,(function(){return t[e]}))}(i);n("2872");var c,a,r,l,s=n("f0c5"),u=Object(s["a"])(t["default"],c,a,!1,null,null,null,!1,r,l);o["default"]=u.exports}},[["962a","common/runtime","common/vendor"]]]);